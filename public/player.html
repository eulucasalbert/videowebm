<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">

<style>
body {
  margin: 0;
  background: transparent;
  overflow: hidden;
  font-family: Arial, sans-serif;
}

#container {
  position: absolute;
  width: 100%;
  height: 100%;
  display: none;
  align-items: center;
  justify-content: center;
}

video {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

#username {
  position: absolute;
  bottom: 15%;
  font-size: 48px;
  color: white;
  text-shadow: 0 0 10px black;
}
</style>
</head>

<body>

<div id="container">
  <video id="video" playsinline>
    <source src="nivel-up.webm" type="video/webm">
  </video>
  <div id="username"></div>
</div>

<script>
const video = document.getElementById("video");
const container = document.getElementById("container");
const usernameDiv = document.getElementById("username");

// conexão com o Replit
const socket = new WebSocket("wss://SEU_REPLIT_URL");

socket.onmessage = (event) => {
  const data = JSON.parse(event.data);

  if (data.type === "nivel_up") {
    usernameDiv.innerText = data.username;

    // reinicia animação
    container.style.display = "flex";
    video.currentTime = 0;
    video.play();

    // esconder depois que acabar
    video.onended = () => {
      container.style.display = "none";
    };
  }
};
</script>

</body>
</html>
